# –ì–ª–∞–≤–∞ 5: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–≤—è–∑–∏ - –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑

## –û–±–∑–æ—Ä –≥–ª–∞–≤—ã
–ü—è—Ç–∞—è –≥–ª–∞–≤–∞ –∑–Ω–∞–∫–æ–º–∏—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ —Å–≤—è–∑–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ò–∑—É—á–∞—é—Ç—Å—è –¥–≤–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö: –ø—Ä–æ—Ç–æ–∫–æ–ª I2C –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥–∞—Ç—á–∏–∫–∞–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ PDM (Pulse Density Modulation) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ—Å–∏–≥–Ω–∞–ª–∞–º–∏. –ì–ª–∞–≤–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –∏ –≤–≤–µ–¥–µ–Ω–∏–µ –≤ —Ü–∏—Ñ—Ä–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–∏–≥–Ω–∞–ª–æ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –≥–ª–∞–≤–µ

–ì–ª–∞–≤–∞ 5 —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å–≤—è–∑–∏:

```
CH5/
‚îú‚îÄ‚îÄ hdl/
‚îÇ   ‚îú‚îÄ‚îÄ temp_pkg.sv          # –ü–∞–∫–µ—Ç —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ i2c_temp.sv          # I2C –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ pdm_top.sv           # –í–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å PDM –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ pdm_inputs.sv        # PDM –∑–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ pdm_output.sv        # PDM –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
‚îî‚îÄ‚îÄ tb/
    ‚îú‚îÄ‚îÄ tb_temp.sv           # –¢–µ—Å—Ç–±–µ–Ω—á –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞
    ‚îî‚îÄ‚îÄ tb_pdm.sv            # –¢–µ—Å—Ç–±–µ–Ω—á –¥–ª—è PDM —Å–∏—Å—Ç–µ–º—ã
```

---

## 1. –û—Å–Ω–æ–≤—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —Å–≤—è–∑–∏

### 1.1. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

#### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ vs –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã

**–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (I2C, SPI):**
- **Dedicated clock line** - –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–∏–Ω–∏—è —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ñ—Ä–æ–Ω—Ç—É —á–∞—Å–æ–≤
- **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π timing** - –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –º–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–∏–µ–º–Ω–∏–∫–µ

**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã (UART, PDM):**
- **Embedded timing** - —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ª–æ–∂–µ–Ω–æ –≤ –¥–∞–Ω–Ω—ã–µ
- **Clock recovery** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —á–∞—Å–æ–≤ –∏–∑ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ì–∏–±–∫–æ—Å—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —á–∞—Å—Ç–æ—Ç–∞–º
- **–°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - —Ç—Ä–µ–±—É–µ—Ç –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

#### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ vs –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ (I2C, PDM, UART):**
- **–ú–∏–Ω–∏–º—É–º –ø—Ä–æ–≤–æ–¥–æ–≤** - —ç–∫–æ–Ω–æ–º–∏—è –≤—ã–≤–æ–¥–æ–≤ –∫–æ—Ä–ø—É—Å–∞
- **–í—ã—Å–æ–∫–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏** - –º–µ–Ω—å—à–µ –ø—Ä–æ–±–ª–µ–º —Å cross-talk
- **–ë–æ–ª—å—à–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è** - –ª—É—á—à–∞—è –ø–æ–º–µ—Ö–æ–∑–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç—å
- **–ü—Ä–æ—Ç–æ–∫–æ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ (Traditional memory bus):**
- **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å** - –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∏—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞** - –ø—Ä—è–º–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —à–∏–Ω –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ—Ä–æ—Ç–∫–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è** - –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö
- **–ú–Ω–æ–≥–æ –≤—ã–≤–æ–¥–æ–≤** - –¥–æ—Ä–æ–≥–∏–µ –∫–æ—Ä–ø—É—Å–∞ –∏ –ø–ª–∞—Ç—ã

---

## 2. I2C –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç—á–∏–∫–æ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

```mermaid
sequenceDiagram
    participant M as FPGA Master
    participant S as TMP Sensor
    Note over M,S: I2C Temperature Reading Protocol

    M->>S: START condition
    M->>S: Slave Address (0x4B)
    M->>S: R/W bit (1 = Read)
    S->>M: ACK
    S->>M: Temperature High Byte
    M->>S: ACK
    S->>M: Temperature Low Byte
    M->>S: NACK
    M->>S: STOP condition
```

### 2.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è i2c_temp.sv

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```systemverilog
module i2c_temp #(
    parameter  SMOOTHING    = 16,        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å—á–µ—Ç–æ–≤ –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è
    parameter  INTERVAL     = 1000000000,// –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏ (ns)
    parameter  NUM_SEGMENTS = 8,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä—è–¥–æ–≤ –¥–∏—Å–ø–ª–µ—è
    parameter  CLK_PER      = 10         // –ü–µ—Ä–∏–æ–¥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤ (ns)
) (
    input wire                      clk, // 100MHz —Å–∏—Å—Ç–µ–º–Ω—ã–µ —á–∞—Å—ã

    // –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
    inout wire                      TMP_SCL, // I2C —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    inout wire                      TMP_SDA, // I2C –¥–∞–Ω–Ω—ã–µ
    inout wire                      TMP_INT, // –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
    inout wire                      TMP_CT,  // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

    // 7-—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –¥–∏—Å–ø–ª–µ–π
    output logic [NUM_SEGMENTS-1:0] anode,   // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞–º–∏
    output logic [7:0]              cathode  // –°–µ–≥–º–µ–Ω—Ç—ã –¥–∏—Å–ø–ª–µ—è
);
```

#### –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ I2C
```systemverilog
localparam TIME_1SEC   = int'(INTERVAL/CLK_PER);    // –¢–∞–∫—Ç–æ–≤ –≤ 1 —Å–µ–∫—É–Ω–¥–µ
localparam TIME_THDSTA = int'(600/CLK_PER);         // Hold time START (600ns)
localparam TIME_TSUSTA = int'(600/CLK_PER);         // Setup time START (600ns)
localparam TIME_THIGH  = int'(600/CLK_PER);         // Clock HIGH time (600ns)
localparam TIME_TLOW   = int'(1300/CLK_PER);        // Clock LOW time (1300ns)
localparam TIME_TSUDAT = int'(20/CLK_PER);          // Data setup time (20ns)
localparam TIME_TSUSTO = int'(600/CLK_PER);         // Setup time STOP (600ns)
localparam TIME_THDDAT = int'(30/CLK_PER);          // Data hold time (30ns)
```

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É I2C:**
- **Standard Mode (100 kHz)** - TIME_TLOW = 4.7Œºs, TIME_THIGH = 4.0Œºs
- **Fast Mode (400 kHz)** - TIME_TLOW = 1.3Œºs, TIME_THIGH = 0.6Œºs
- **–î–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Fast Mode requirements

### 2.2. –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö I2C —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ I2C –ø–∞–∫–µ—Ç–∞
```systemverilog
localparam I2C_ADDR = 7'b1001011;     // –ê–¥—Ä–µ—Å –¥–∞—Ç—á–∏–∫–∞ TMP102 (0x4B)
localparam I2CBITS = 1 +              // START condition
                     7 +              // 7 –±–∏—Ç–æ–≤ –∞–¥—Ä–µ—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                     1 +              // 1 –±–∏—Ç Read/Write (1 = —á—Ç–µ–Ω–∏–µ)
                     1 +              // 1 –±–∏—Ç ACK –æ—Ç slave
                     8 +              // 8 –±–∏—Ç–æ–≤ —Å—Ç–∞—Ä—à–µ–≥–æ –±–∞–π—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
                     1 +              // 1 –±–∏—Ç ACK –æ—Ç master
                     8 +              // 8 –±–∏—Ç–æ–≤ –º–ª–∞–¥—à–µ–≥–æ –±–∞–π—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
                     1 +              // 1 –±–∏—Ç NACK –æ—Ç master (–ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞–π—Ç)
                     1 + 1;           // STOP condition
// –ò—Ç–æ–≥–æ: 30 –±–∏—Ç–æ–≤
```

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```systemverilog
always @(posedge clk) begin
    case (spi_state)
        IDLE: begin
            // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏
            i2c_data  <= {1'b0,        // START bit
                          I2C_ADDR,    // –ê–¥—Ä–µ—Å 0x4B
                          1'b1,        // Read operation
                          1'b0,        // ACK –æ—Ç slave
                          8'b00,       // –°—Ç–∞—Ä—à–∏–π –±–∞–π—Ç (–ø–æ–ª—É—á–∞–µ–º)
                          1'b0,        // ACK –æ—Ç master
                          8'b00,       // –ú–ª–∞–¥—à–∏–π –±–∞–π—Ç (–ø–æ–ª—É—á–∞–µ–º)
                          1'b1,        // NACK –æ—Ç master
                          1'b0,        // STOP bit
                          1'b1};       // Idle state

            // –ú–∞—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ (0 = master –ø–µ—Ä–µ–¥–∞–µ—Ç, 1 = slave –ø–µ—Ä–µ–¥–∞–µ—Ç)
            i2c_en    <= {1'b1,        // START: master
                          7'h7F,       // –ê–¥—Ä–µ—Å: master –ø–µ—Ä–µ–¥–∞–µ—Ç
                          1'b1,        // R/W: master –ø–µ—Ä–µ–¥–∞–µ—Ç
                          1'b0,        // ACK: slave –æ—Ç–≤–µ—á–∞–µ—Ç
                          8'b00,       // –î–∞–Ω–Ω—ã–µ: slave –ø–µ—Ä–µ–¥–∞–µ—Ç
                          1'b1,        // ACK: master –æ—Ç–≤–µ—á–∞–µ—Ç
                          8'b00,       // –î–∞–Ω–Ω—ã–µ: slave –ø–µ—Ä–µ–¥–∞–µ—Ç
                          1'b1,        // NACK: master –æ—Ç–≤–µ—á–∞–µ—Ç
                          1'b1,        // STOP: master
                          1'b1};       // Idle: master

            // –ú–∞—Å–∫–∞ –∑–∞—Ö–≤–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (1 = —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∏—Ç –≤ temp_data)
            i2c_capt  <= {1'b0,        // START: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          7'h00,       // –ê–¥—Ä–µ—Å: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          1'b0,        // R/W: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          1'b0,        // ACK: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          8'hFF,       // –î–∞–Ω–Ω—ã–µ: –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –±–∏—Ç—ã
                          1'b0,        // ACK: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          8'hFF,       // –î–∞–Ω–Ω—ã–µ: –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –±–∏—Ç—ã
                          1'b0,        // NACK: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          1'b0,        // STOP: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
                          1'b0};       // Idle: –Ω–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
        end
    endcase
end
```

### 2.3. –ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç I2C –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

#### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
```systemverilog
typedef enum bit [2:0] {
    IDLE,      // –û–∂–∏–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    START,     // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è START condition
    TLOW,      // Clock LOW phase
    TSU,       // Data setup time
    THIGH,     // Clock HIGH phase (–∑–∞—Ö–≤–∞—Ç –¥–∞–Ω–Ω—ã—Ö)
    THD,       // Data hold time
    TSTO       // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è STOP condition
} spi_t;
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏
```systemverilog
// Open-drain —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è I2C
assign TMP_SCL = scl_en ? 'z : '0;    // 'z = high impedance (pull-up), '0 = drive low
assign TMP_SDA = sda_en ? 'z : '0;    // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

// –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
always @(posedge clk) begin
    scl_en <= '1;  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é SCL = high impedance

    // SDA —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–µ—Ä–µ–¥–∞—á–∏
    sda_en <= ~i2c_en[I2CBITS - bit_count - 1] |      // 0 –µ—Å–ª–∏ master –ø–µ—Ä–µ–¥–∞–µ—Ç
              i2c_data[I2CBITS - bit_count - 1];      // –î–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ master –ø–µ—Ä–µ–¥–∞–µ—Ç
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø open-drain:**
- **'z (high impedance)** - –ª–∏–Ω–∏—è –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∫ VCC —á–µ—Ä–µ–∑ pull-up —Ä–µ–∑–∏—Å—Ç–æ—Ä
- **'0 (drive low)** - –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∫ GND
- **Wired-AND –ª–æ–≥–∏–∫–∞** - –ª—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç "–ø—Ä–∏—Ç—è–Ω—É—Ç—å" –ª–∏–Ω–∏—é –∫ 0

### 2.4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

#### –°–æ—Å—Ç–æ—è–Ω–∏–µ IDLE - –û–∂–∏–¥–∞–Ω–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
```systemverilog
IDLE: begin
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–º. –≤—ã—à–µ)
    bit_count <= '0;
    sda_en    <= '1;                    // SDA –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–∫–æ—è (HIGH)

    if (counter == TIME_1SEC) begin
        temp_data     <= '0;            // –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
        spi_state     <= START;         // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –Ω–∞—á–∞–ª—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        counter_reset <= '1;            // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
        sda_en        <= '0;            // –ù–∞—á–∞–ª–æ START condition (SDA LOW)
    end
end
```

#### –°–æ—Å—Ç–æ—è–Ω–∏–µ START - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è START condition
```systemverilog
START: begin
    sda_en <= '0;                       // –£–¥–µ—Ä–∂–∞–Ω–∏–µ SDA LOW

    if (counter == TIME_THDSTA) begin   // Hold time for START
        counter_reset <= '1;
        scl_en        <= '0;            // –û–ø—É—Å–∫–∞–Ω–∏–µ SCL –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
        spi_state     <= TLOW;
    end
end
```

**START condition –≤ I2C:**
- SDA –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Å HIGH –Ω–∞ LOW –ø–æ–∫–∞ SCL = HIGH
- –°–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –æ –Ω–∞—á–∞–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
```systemverilog
TLOW: begin
    scl_en <= '0';                      // SCL —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è LOW
    if (counter == TIME_TLOW) begin
        bit_count     <= bit_count + 1'b1;  // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–∏—Ç—É
        counter_reset <= '1;
        spi_state     <= TSU;           // –ü–µ—Ä–µ—Ö–æ–¥ –∫ setup –≤—Ä–µ–º–µ–Ω–∏
    end
end

TSU: begin
    scl_en <= '0';                      // SCL –≤—Å–µ –µ—â–µ LOW, –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ
    if (counter == TIME_TSUSTA) begin
        counter_reset <= '1;
        spi_state     <= THIGH;         // –ü–æ–¥–Ω–∏–º–∞–µ–º SCL –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
    end
end

THIGH: begin
    scl_en <= '1';                      // SCL HIGH - –¥–∞–Ω–Ω—ã–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è
    if (counter == TIME_THIGH) begin
        if (capture_en)
            temp_data <= temp_data << 1 | TMP_SDA;  // –ó–∞—Ö–≤–∞—Ç –±–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
        counter_reset <= '1;
        spi_state     <= THD;           // –ü–µ—Ä–µ—Ö–æ–¥ –∫ hold –≤—Ä–µ–º–µ–Ω–∏
    end
end

THD: begin
    scl_en <= '0';                      // SCL –æ–±—Ä–∞—Ç–Ω–æ LOW
    if (counter == TIME_THDDAT) begin
        counter_reset <= '1;
        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –±–∏—Ç—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
        spi_state     <= (bit_count == I2CBITS) ? TSTO : TLOW;
    end
end
```

#### –°–æ—Å—Ç–æ—è–Ω–∏–µ TSTO - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```systemverilog
TSTO: begin
    // STOP condition: SDA –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç —Å LOW –Ω–∞ HIGH –ø—Ä–∏ SCL = HIGH
    if (counter == TIME_TSUSTO) begin
        convert       <= '1;            // –°–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
        counter_reset <= '1;
        spi_state     <= IDLE;          // –í–æ–∑–≤—Ä–∞—Ç –∫ –æ–∂–∏–¥–∞–Ω–∏—é
    end
end
```

### 2.5. –ó–∞—Ö–≤–∞—Ç –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ö–≤–∞—Ç–æ–º –¥–∞–Ω–Ω—ã—Ö
```systemverilog
assign capture_en = i2c_capt[I2CBITS - bit_count - 1];

// –í —Å–æ—Å—Ç–æ—è–Ω–∏–∏ THIGH:
if (capture_en)
    temp_data <= temp_data << 1 | TMP_SDA;
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
- **i2c_capt –º–∞—Å—Å–∏–≤** –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –±–∏—Ç—ã –Ω—É–∂–Ω–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å
- **–°–¥–≤–∏–≥ –≤–ª–µ–≤–æ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –±–∏—Ç–∞** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç 16-–±–∏—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- **–î–∞–Ω–Ω—ã–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ THIGH** –∫–æ–≥–¥–∞ SCL = HIGH

#### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–∞ TMP102
```
–ë–∏—Ç—ã [15:4] - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –¶–µ–ª—å—Å–∏—è (–∑–Ω–∞–∫–æ–≤–æ–µ —á–∏—Å–ª–æ)
–ë–∏—Ç—ã [3:0]  - –î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å (1/16 –≥—Ä–∞–¥—É—Å–∞ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É)

–ü—Ä–∏–º–µ—Ä: 0x1964 = 25.390625¬∞C
  [15:4] = 0x196 = 406 (—Ü–µ–ª–∞—è —á–∞—Å—Ç—å)
  [3:0]  = 0x4 = 4/16 = 0.25 (–¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å)
```

---

## 3. –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3.1. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è

#### –£—Å–ª–æ–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–≥–ª–∞–∂–∏–≤–∞—é—â–µ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
```systemverilog
generate
    if (SMOOTHING == 0) begin : g_NO_SMOOTH
        assign smooth_data = temp_data;        // –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
        assign smooth_convert = convert;       // –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å–∏–≥–Ω–∞–ª–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    end else begin : g_SMOOTH
        // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ
    end
endgenerate
```

### 3.2. –ê–ª–≥–æ—Ä–∏—Ç–º —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–∞
```systemverilog
logic [$clog2(SMOOTHING):0] smooth_count;     // –°—á–µ—Ç—á–∏–∫ –æ—Ç—Å—á–µ—Ç–æ–≤ –≤ –±—É—Ñ–µ—Ä–µ
logic [15:0]                dout;             // –î–∞–Ω–Ω—ã–µ –∏–∑ FIFO
logic                       rden, rden_del;   // –°–∏–≥–Ω–∞–ª—ã —á—Ç–µ–Ω–∏—è FIFO
logic [31:0]                accumulator;      // –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å —Å—É–º–º—ã
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ:**
1. **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ—Ç—Å—á–µ—Ç–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—É–º–º—É –∏ FIFO
2. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ—Ç—Å—á–µ—Ç–æ–≤** - –≤—ã—á–∏—Ç–∞–Ω–∏–µ –∏–∑ —Å—É–º–º—ã –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –±—É—Ñ–µ—Ä–∞
3. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ** - –¥–µ–ª–µ–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π —Å—É–º–º—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å—á–µ—Ç–æ–≤

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞
```systemverilog
always @(posedge clk) begin
    rden           <= '0;
    rden_del       <= rden;
    smooth_convert <= '0;

    if (convert) begin
        smooth_count <= smooth_count + 1'b1;   // –°—á–µ—Ç—á–∏–∫ –æ—Ç—Å—á–µ—Ç–æ–≤
        accumulator  <= accumulator + temp_data; // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞

    end else if (smooth_count == SMOOTHING) begin
        rden         <= '1;                     // –ß–∏—Ç–∞–µ–º —Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π –æ—Ç—Å—á–µ—Ç
        smooth_count <= smooth_count - 1'b1;    // –î–µ–∫—Ä–µ–º–µ–Ω—Ç (–±—É—Ñ–µ—Ä –ø–æ–ª–Ω—ã–π)

    end else if (rden) begin
        accumulator  <= accumulator - dout;     // –í—ã—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ä—ã–π –æ—Ç—Å—á–µ—Ç

    end else if (rden_del) begin
        smooth_convert <= '1';                  // –°–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–≥–ª–∞–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        smooth_data    <= accumulator >> 4;    // –î–µ–ª–µ–Ω–∏–µ –Ω–∞ 16 (—Å—Ä–µ–¥–Ω–µ–µ)
    end
end
```

### 3.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Xilinx XPM FIFO

#### –ò–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ XPM_FIFO_SYNC
```systemverilog
xpm_fifo_sync #(
    .FIFO_WRITE_DEPTH       (SMOOTHING),      // –ì–ª—É–±–∏–Ω–∞ FIFO = –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è
    .WRITE_DATA_WIDTH       (16)              // –®–∏—Ä–∏–Ω–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
) u_xpm_fifo_sync (
    .sleep                  ('0),             // FIFO –Ω–µ –≤ —Ä–µ–∂–∏–º–µ —Å–Ω–∞
    .rst                    ('0),             // –ë–µ–∑ —Å–±—Ä–æ—Å–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è initial)

    .wr_clk                 (clk),
    .wr_en                  (convert),         // –ó–∞–ø–∏—Å—å –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    .din                    (temp_data),       // –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

    .rd_en                  (rden),           // –ß—Ç–µ–Ω–∏–µ –ø–æ –∑–∞–ø—Ä–æ—Å—É
    .dout                   (dout),           // –°–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

    // –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∏–≥–Ω–∞–ª—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
    .full(), .prog_full(), .wr_data_count(), .overflow(), .wr_rst_busy(),
    .almost_full(), .wr_ack(), .empty(), .prog_empty(), .rd_data_count(),
    .underflow(), .rd_rst_busy(), .almost_empty(), .data_valid(),
    .injectsbiterr('0), .injectdbiterr('0), .sbiterr(), .dbiterr()
);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ XPM FIFO:**
- **–ì–æ—Ç–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BRAM
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –æ—à–∏–±–æ–∫
- **–ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö FPGA Xilinx

---

## 4. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

### 4.1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Ü–µ–ª—É—é –∏ –¥—Ä–æ–±–Ω—É—é —á–∞—Å—Ç–∏

#### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
```systemverilog
always @(posedge clk) begin
    if (smooth_convert) begin
        // –¶–µ–ª–∞—è —á–∞—Å—Ç—å: –±–∏—Ç—ã [15:7] (—Å—Ç–∞—Ä—à–∏–µ 9 –±–∏—Ç–æ–≤)
        encoded_int  <= bin_to_bcd(smooth_data[15:7]);

        // –î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å: –±–∏—Ç—ã [6:3] —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        fraction     <= bin_to_bcd(fraction_table[smooth_data[6:3]]);

        // –ü–æ–∑–∏—Ü–∏—è –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Ç–æ—á–∫–∏ (—Ä–∞–∑—Ä—è–¥ 4 —Å–ø—Ä–∞–≤–∞)
        digit_point  <= 8'b00010000;
    end
end
```

### 4.2. –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã
```systemverilog
logic [3:0][3:0] fraction;              // BCD –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å
logic [15:0]     fraction_table[16];    // –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

initial begin
    for (int i = 0; i < 16; i++)
        fraction_table[i] = i * 625;    // 1/16 * 10000 –¥–ª—è 4 –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**
- **–î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –≤ –¥–∞—Ç—á–∏–∫–µ**: 4 –±–∏—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç 1/16 –¥–æ–ª–∏ –≥—Ä–∞–¥—É—Å–∞
- **–î–µ—Å—è—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**: 1/16 = 0.0625, —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ 10000 = 625
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 4 –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

| –ë–∏—Ç—ã [3:0] | –î–µ—Å—è—Ç–∏—á–Ω–∞—è –¥–æ–ª—è | –ó–Ω–∞—á–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ | BCD —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|------------|-----------------|-------------------|---------------|
| 0000       | 0/16 = 0.0000   | 0000              | 0000         |
| 0001       | 1/16 = 0.0625   | 0625              | 0625         |
| 0010       | 2/16 = 0.1250   | 1250              | 1250         |
| ...        | ...             | ...               | ...          |
| 1111       | 15/16 = 0.9375  | 9375              | 9375         |

### 4.3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –¥–∏—Å–ø–ª–µ—è

#### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
```systemverilog
assign encoded = {encoded_int[3:0], fraction[3:0]};
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
```
–†–∞–∑—Ä—è–¥—ã: [7] [6] [5] [4] [.] [3] [2] [1] [0]
         –¶–µ–ª–∞—è —á–∞—Å—Ç—å      |   –î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å

–ü—Ä–∏–º–µ—Ä: 25.6250¬∞C
encoded_int  = [0000][0002][0005][xxxx] (—Ü–µ–ª–∞—è —á–∞—Å—Ç—å: 25.x)
fraction     = [0006][0002][0005][0000] (–¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å: .6250)
encoded      = [0000][0002][0005][0006][0002][0005][0000]
–î–∏—Å–ø–ª–µ–π: 0025.6250
```

---

## 5. PDM (Pulse Density Modulation) –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞

### 5.1. –û—Å–Ω–æ–≤—ã PDM –º–æ–¥—É–ª—è—Ü–∏–∏

#### –ü—Ä–∏–Ω—Ü–∏–ø—ã PDM
PDM - —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ—Ç–æ–∫ –±–∏—Ç–æ–≤ –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã:

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ PDM:**
- **–û–¥–Ω–æ—Ä–∞–∑—Ä—è–¥–Ω—ã–π –ø–æ—Ç–æ–∫** - –∫–∞–∂–¥—ã–π —Ç–∞–∫—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω –±–∏—Ç
- **–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∏–º–ø—É–ª—å—Å–æ–≤** –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∞–º–ø–ª–∏—Ç—É–¥–µ —Å–∏–≥–Ω–∞–ª–∞
- **–í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏** - –æ–±—ã—á–Ω–æ –≤ –º–µ–≥–∞–≥–µ—Ä—Ü–∞—Ö
- **–ü—Ä–æ—Å—Ç–æ–π D/A –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å** - low-pass —Ñ–∏–ª—å—Ç—Ä

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å PCM:**
```
PCM (–æ–±—ã—á–Ω–∞—è –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∞):
Sample: [01100100] [01110010] [01011001] ... (8-16 –±–∏—Ç –Ω–∞ –æ—Ç—Å—á–µ—Ç)

PDM (–ø–ª–æ—Ç–Ω–æ—Å—Ç–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è):
Stream: 11010110111010101101... (1 –±–∏—Ç –Ω–∞ —Ç–∞–∫—Ç, –≤—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞)
```

### 5.2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã PDM

#### –í–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å pdm_top.sv
```systemverilog
module pdm_top #(
    parameter RAM_SIZE = 16384,         // –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –∑–∞–ø–∏—Å–∏ (–æ—Ç—Å—á–µ—Ç–æ–≤)
    parameter CLK_FREQ = 100            // –ß–∞—Å—Ç–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤ (MHz)
) (
    input wire          clk,            // 100MHz —Å–∏—Å—Ç–µ–º–Ω—ã–µ —á–∞—Å—ã

    // –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
    output logic        m_clk,          // –ß–∞—Å—ã –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (~2.4MHz)
    output logic        m_lr_sel,       // –í—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞ L/R (=0 –¥–ª—è –º–æ–Ω–æ)
    input wire          m_data,         // PDM –ø–æ—Ç–æ–∫ –æ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

    // –ò–Ω–¥–∏–∫–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è —Å–∏–≥–Ω–∞–ª–∞
    output logic        R, G, B,        // RGB LED –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
    output logic [15:0] LED,            // –ú–∞—Å—Å–∏–≤ LED –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    input logic         BTNU,           // –ö–Ω–æ–ø–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
    input logic         BTNC,           // –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏

    // PDM –≤—ã–≤–æ–¥ –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∞
    output wire         AUD_PWM,        // PDM —Å–∏–≥–Ω–∞–ª –¥–ª—è –¥–∏–Ω–∞–º–∏–∫–∞
    output wire         AUD_SD          // Shutdown –¥–∏–Ω–∞–º–∏–∫–∞ (=1 = –≤–∫–ª—é—á–µ–Ω)
);
```

### 5.3. PDM –∑–∞—Ö–≤–∞—Ç - –º–æ–¥—É–ª—å pdm_inputs.sv

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
```systemverilog
localparam CLK_COUNT = int'((CLK_FREQ*1000000)/(SAMPLE_RATE*2));
// –î–ª—è CLK_FREQ=100MHz, SAMPLE_RATE=2.4MHz:
// CLK_COUNT = 100000000/(2400000*2) = 20.8 ‚âà 21 —Ç–∞–∫—Ç–æ–≤

logic [$clog2(CLK_COUNT)-1:0] clk_counter;

always @(posedge clk) begin
    m_clk_en <= '0;

    if (clk_counter == CLK_COUNT - 1) begin
        clk_counter <= '0;
        m_clk       <= ~m_clk;          // –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        m_clk_en    <= ~m_clk;          // Enable signal –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    end else begin
        clk_counter <= clk_counter + 1;
        if (clk_counter == CLK_COUNT - 2)
            m_clk_en <= ~m_clk;         // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ enable
    end
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
- **–î–µ–ª–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã** 100MHz ‚Üí 2.4MHz –¥–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- **m_clk_en —Å–∏–≥–Ω–∞–ª** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Å —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** m_clk_en –Ω–∞ 1 —Ç–∞–∫—Ç —Ä–∞–Ω—å—à–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### –ê–ª–≥–æ—Ä–∏—Ç–º –¥–µ–º–æ–¥—É–ª—è—Ü–∏–∏ PDM

```systemverilog
logic [1:0][7:0] counter;           // –°—á–µ—Ç—á–∏–∫–∏ –¥–ª—è –¥–≤—É—Ö –∫–∞–Ω–∞–ª–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
logic [1:0][7:0] sample_counter;    // –ù–∞–∫–æ–ø–∏—Ç–µ–ª–∏ PDM –∏–º–ø—É–ª—å—Å–æ–≤

always @(posedge clk) begin
    amplitude_valid <= '0;

    if (m_clk_en) begin
        counter[0] <= counter[0] + 1'b1;
        counter[1] <= counter[1] + 1'b1;

        // –ö–∞–Ω–∞–ª 0: –æ–±—Ä–∞–±–æ—Ç–∫–∞ 200 –æ—Ç—Å—á–µ—Ç–æ–≤
        if (counter[0] == 199) begin
            counter[0]        <= '0;
            amplitude         <= sample_counter[0];      // –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            amplitude_valid   <= '1;                     // –°–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
            sample_counter[0] <= '0;                     // –°–±—Ä–æ—Å –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è
        end else if (counter[0] < 128) begin           // –ü–µ—Ä–≤–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –æ–∫–Ω–∞
            sample_counter[0] <= sample_counter[0] + m_data; // –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü
        end

        // –ö–∞–Ω–∞–ª 1: –æ–±—Ä–∞–±–æ—Ç–∫–∞ 228 –æ—Ç—Å—á–µ—Ç–æ–≤ (–ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Å –∫–∞–Ω–∞–ª–æ–º 0)
        if (counter[1] == 227) begin
            counter[1]        <= '0;
            amplitude         <= sample_counter[1] + m_data; // –í—ã–≤–æ–¥ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –±–∏—Ç–æ–º
            amplitude_valid   <= '1;
            sample_counter[1] <= '0;
        end else if (counter[1] > 100) begin           // –í—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –æ–∫–Ω–∞
            sample_counter[1] <= sample_counter[1] + m_data;
        end
    end
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø –¥–µ–º–æ–¥—É–ª—è—Ü–∏–∏:**
1. **–ü–æ–¥—Å—á–µ—Ç –µ–¥–∏–Ω–∏—Ü –≤ –æ–∫–Ω–µ** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ PDM –ø–æ—Ç–æ–∫–∞
2. **–°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
3. **–î–≤–∞ –∫–∞–Ω–∞–ª–∞ —Å —Ä–∞–∑–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º** - —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
4. **amplitude** = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü –≤ –æ–∫–Ω–µ ‚âà –∞–º–ø–ª–∏—Ç—É–¥–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞

### 5.4. –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

#### –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ–¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç—å
```systemverilog
logic [6:0] amplitude_store[RAM_SIZE];     // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–∞–º—è—Ç—å –¥–ª—è –æ—Ç—Å—á–µ—Ç–æ–≤
logic [$clog2(RAM_SIZE)-1:0] ram_wraddr;  // –ê–¥—Ä–µ—Å –∑–∞–ø–∏—Å–∏
logic [$clog2(RAM_SIZE)-1:0] ram_rdaddr;  // –ê–¥—Ä–µ—Å —á—Ç–µ–Ω–∏—è
logic ram_we;                              // –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—å—é
always @(posedge clk) begin
    button_csync <= button_csync << 1 | BTNC;  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –∑–∞–ø–∏—Å–∏
    ram_we       <= '0;

    // –î–µ—Ç–µ–∫—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –∑–∞–ø–∏—Å–∏
    if (button_csync[2:1] == 2'b01) begin
        start_capture <= '1;
        LED           <= '0;                    // –°–±—Ä–æ—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
    end else if (start_capture && amplitude_valid) begin
        // –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ LED
        LED[ram_wraddr[$clog2(RAM_SIZE)-1:$clog2(RAM_SIZE)-4]] <= '1;

        ram_we     <= '1;                       // –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
        ram_wraddr <= ram_wraddr + 1'b1;        // –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –∞–¥—Ä–µ—Å–∞

        if (&ram_wraddr) begin                  // –ë—É—Ñ–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω
            start_capture <= '0;                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏
            LED[15]       <= '1;                // –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
        end
    end
end

// –ü—Ä–æ—Å—Ç–∞—è –¥–≤—É—Ö–ø–æ—Ä—Ç–æ–≤–∞—è –ø–∞–º—è—Ç—å
always @(posedge clk) begin
    if (ram_we) amplitude_store[ram_wraddr] <= amplitude;
    ram_dout <= amplitude_store[ram_rdaddr];
end
```

#### –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
```systemverilog
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º
always @(posedge clk) begin
    button_usync <= button_usync << 1 | BTNU;  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

    if (button_usync[2:1] == 2'b01) begin
        start_playback <= '1';
        ram_rdaddr     <= '0;                   // –°–±—Ä–æ—Å –∞–¥—Ä–µ—Å–∞ —á—Ç–µ–Ω–∏—è
    end else if (start_playback && m_clk_en_del) begin
        // –ò–Ω–¥–∏–∫–∞—Ü–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–æ—á–∏—Å—Ç–∫–∞ LED)
        clr_led[clr_addr] <= '1;
        AUD_PWM_en <= '1';                      // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é high impedance

        if (amplitude_valid) begin
            ram_rdaddr  <= ram_rdaddr + 1'b1;    // –°–ª–µ–¥—É—é—â–∏–π –æ—Ç—Å—á–µ—Ç
            amp_counter <= 7'd1;                 // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–∞ PDM
            amp_capture <= ram_dout;             // –ó–∞—Ö–≤–∞—Ç –∞–º–ø–ª–∏—Ç—É–¥—ã –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
            if (ram_dout != 0) AUD_PWM_en <= '0; // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—ã—Ö–æ–¥–∞ –ø—Ä–∏ –Ω–µ–Ω—É–ª–µ–≤–æ–π –∞–º–ø–ª–∏—Ç—É–¥–µ
        end else begin
            amp_counter <= amp_counter + 1'b1;   // –°—á–µ—Ç—á–∏–∫ –¥–ª—è PDM –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
            if (amp_capture < amp_counter) AUD_PWM_en <= '0; // PDM –º–æ–¥—É–ª—è—Ü–∏—è
        end

        if (&ram_rdaddr) start_playback <= '0;  // –ö–æ–Ω–µ—Ü –±—É—Ñ–µ—Ä–∞
    end
end

assign AUD_PWM = AUD_PWM_en ? '0 : 'z;        // Open-drain —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–Ω–∞–º–∏–∫–æ–º
```

### 5.5. PDM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

#### –ü—Ä–æ—Å—Ç–µ–π—à–∏–π Delta-Sigma –º–æ–¥—É–ª—è—Ç–æ—Ä
–í –º–æ–¥—É–ª–µ `pdm_output.sv` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π PDM –º–æ–¥—É–ª—è—Ç–æ—Ä:

```systemverilog
module pdm_output (
    input wire        clk,              // –í—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    input logic [6:0] data_in,          // –í—Ö–æ–¥–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞ (0-127)
    output logic      data_out          // PDM –ø–æ—Ç–æ–∫
);

logic [6:0] error;                      // –ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä –æ—à–∏–±–∫–∏

always @(posedge clk) begin
    if (data_in >= error) begin
        data_out <= '1;                 // –í—ã—Ö–æ–¥ –µ–¥–∏–Ω–∏—Ü—ã
        error    <= error + 127 - data_in; // –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –æ—à–∏–±–∫–∏
    end else begin
        data_out <= '0;                 // –í—ã—Ö–æ–¥ –Ω—É–ª—è
        error    <= error - data_in;    // –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –æ—à–∏–±–∫–∏
    end
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø Delta-Sigma –º–æ–¥—É–ª—è—Ü–∏–∏:**
1. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ —Å –æ—à–∏–±–∫–æ–π** - –µ—Å–ª–∏ –≤—Ö–æ–¥ –±–æ–ª—å—à–µ, –≤—ã–¥–∞–µ–º '1'
2. **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏** - —Ä–∞–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∂–µ–ª–∞–µ–º—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º –≤—ã—Ö–æ–¥–æ–º
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –æ—à–∏–±–∫–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –≤—ã—Ö–æ–¥–Ω–æ–π –±–∏—Ç
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç** - –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –µ–¥–∏–Ω–∏—Ü –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –≤—Ö–æ–¥–Ω–æ–π –∞–º–ø–ª–∏—Ç—É–¥–µ

---

## 6. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ—É—Ä–æ–≤–Ω—è

### 6.1. RGB LED –∏–Ω–¥–∏–∫–∞—Ü–∏—è

#### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–º–ø–ª–∏—Ç—É–¥—ã —á–µ—Ä–µ–∑ —Å–∏–Ω–∏–π LED
```systemverilog
logic [6:0] light_count;                // –°—á–µ—Ç—á–∏–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PWM

always @(posedge clk) begin
    if (m_clk_en) light_count <= light_count + 1'b1;  // –°—á–µ—Ç—á–∏–∫ —Å —á–∞—Å—Ç–æ—Ç–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

    B <= ((40 - amplitude) < light_count);            // PWM —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
    R <= '0';                                          // –ö—Ä–∞—Å–Ω—ã–π –≤—ã–∫–ª—é—á–µ–Ω
    G <= '0';                                          // –ó–µ–ª–µ–Ω—ã–π –≤—ã–∫–ª—é—á–µ–Ω
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
- **light_count** - —Å—á–µ—Ç—á–∏–∫ 0-127 —Å —á–∞—Å—Ç–æ—Ç–æ–π —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
- **PWM —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ** - `B` –∞–∫—Ç–∏–≤–µ–Ω –∫–æ–≥–¥–∞ `light_count >= (40 - amplitude)`
- **–ò–Ω–≤–µ—Ä—Å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** - –±–æ–ª—å—à–∞—è –∞–º–ø–ª–∏—Ç—É–¥–∞ = –º–µ–Ω—å—à–∏–π –ø–æ—Ä–æ–≥ = –±–æ–ª—å—à–µ —è—Ä–∫–æ—Å—Ç—å
- **–†–µ–∑—É–ª—å—Ç–∞—Ç** - —è—Ä–∫–æ—Å—Ç—å —Å–∏–Ω–µ–≥–æ LED –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –≥—Ä–æ–º–∫–æ—Å—Ç–∏

### 6.2. LED array –∏–Ω–¥–∏–∫–∞—Ü–∏—è

#### –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–ø–∏—Å–∏
```systemverilog
// –í–æ –≤—Ä–µ–º—è –∑–∞–ø–∏—Å–∏
LED[ram_wraddr[$clog2(RAM_SIZE)-1:$clog2(RAM_SIZE)-4]] <= '1';

// –ü—Ä–∏–º–µ—Ä –¥–ª—è RAM_SIZE = 16384 (14 –±–∏—Ç–æ–≤ –∞–¥—Ä–µ—Å–∞):
// ram_wraddr[13:10] - —Å—Ç–∞—Ä—à–∏–µ 4 –±–∏—Ç–∞ –∞–¥—Ä–µ—Å–∞ (16 —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π 0-15)
// LED[0] —Å–≤–µ—Ç–∏—Ç—Å—è –ø—Ä–∏ –∞–¥—Ä–µ—Å–∞—Ö 0x0000-0x03FF
// LED[1] —Å–≤–µ—Ç–∏—Ç—Å—è –ø—Ä–∏ –∞–¥—Ä–µ—Å–∞—Ö 0x0400-0x07FF
// ...
// LED[15] —Å–≤–µ—Ç–∏—Ç—Å—è –ø—Ä–∏ –∞–¥—Ä–µ—Å–∞—Ö 0x3C00-0x3FFF
```

#### –ò–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
```systemverilog
logic [3:0] clr_addr;
assign clr_addr = ~ram_rdaddr[$clog2(RAM_SIZE)-1:$clog2(RAM_SIZE)-4];

// –í–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
clr_led[clr_addr] <= '1';               // –û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ - LED –≥–∞—Å–Ω—É—Ç

// –†–µ–∑—É–ª—å—Ç–∞—Ç: LED –≥–∞—Å–Ω—É—Ç –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
```

---

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### 7.1. –¢–µ—Å—Ç–±–µ–Ω—á –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–≥–æ —Å–µ–Ω—Å–æ—Ä–∞

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è (tb_temp.sv)
```systemverilog
module tb_temp;
    parameter  INTERVAL     = 10000;       // –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏
    parameter  NUM_SEGMENTS = 8;
    parameter  CLK_PER      = 20;          // 50MHz –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏

    logic clk;
    tri1 TMP_SCL, TMP_SDA, TMP_INT, TMP_CT; // tri1 = pull-up –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    logic [NUM_SEGMENTS-1:0] anode;
    logic [7:0] cathode;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    initial clk = '0;
    always clk = #(CLK_PER/2) ~clk;

    // –ò–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è —Å —É—Å–∫–æ—Ä–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    i2c_temp #(
        .INTERVAL     (INTERVAL),           // 10Œºs –≤–º–µ—Å—Ç–æ 1 —Å–µ–∫—É–Ω–¥—ã
        .NUM_SEGMENTS (NUM_SEGMENTS),
        .CLK_PER      (CLK_PER)
    ) u_i2c_temp (.*);
endmodule
```

### 7.2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ç–µ—Å—Ç–±–µ–Ω—á –¥–ª—è PDM (tb_pdm.sv)

#### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
```systemverilog
// –¢–∞–±–ª–∏—Ü–∞ —Å–∏–Ω—É—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
bit [6:0] sin_table[128];

initial begin
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –∑–Ω–∞—á–µ–Ω–∏–π —Å–∏–Ω—É—Å–∞ (0-127 –æ—Ç—Å—á–µ—Ç–æ–≤ –Ω–∞ –ø–µ—Ä–∏–æ–¥)
    sin_table = '{0:7'h00, 1:7'h01, 2:7'h03, /* ... */ 127:7'h01};
end

bit [7:0] counter;
bit [6:0] int_count;

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
always @(posedge m_clk) begin
    int_count <= int_count + 1'b1;
    if (&int_count) counter <= counter + 1'b1;     // –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ —Ñ–∞–∑—ã

    if (counter > 127) begin
        data_in <= ~sin_table[counter[6:0]] + 1'b1; // –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–ª—É–≤–æ–ª–Ω–∞
    end else begin
        data_in <= sin_table[counter[6:0]];         // –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–ª—É–≤–æ–ª–Ω–∞
    end
end
```

#### PDM –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
```systemverilog
pdm_output u_pdm_output (
    .clk      (m_clk),                  // –¢–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
    .data_in  (data_in),                // –ê–º–ø–ª–∏—Ç—É–¥–∞ –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Å–∏–Ω—É—Å–∞
    .data_out (m_data)                  // PDM –ø–æ—Ç–æ–∫ –≤ —Å–∏—Å—Ç–µ–º—É
);
```

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–Ω—É—Å–∞** —Å–æ–∑–¥–∞–µ—Ç –∏–∑–º–µ–Ω—è—é—â—É—é—Å—è –∞–º–ø–ª–∏—Ç—É–¥—É
2. **PDM –º–æ–¥—É–ª—è—Ç–æ—Ä** –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∞–º–ø–ª–∏—Ç—É–¥—É –≤ PDM –ø–æ—Ç–æ–∫
3. **pdm_inputs** –¥–µ–º–æ–¥—É–ª–∏—Ä—É–µ—Ç PDM –æ–±—Ä–∞—Ç–Ω–æ –≤ –∞–º–ø–ª–∏—Ç—É–¥—É
4. **–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å–∏/–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª
5. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞

---

## 8. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 8.1. Timing –∞–Ω–∞–ª–∏–∑ –¥–ª—è I2C

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
1. **I2C state machine** - –ø–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ–ª–∂–Ω—ã —É–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤ —Ç–∞–∫—Ç
2. **Counter logic** - —Å—á–µ—Ç—á–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–∞–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
3. **Data capture** - –∑–∞—Ö–≤–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ THIGH

#### Constraints –¥–ª—è I2C —Å–∏–≥–Ω–∞–ª–æ–≤
```tcl
# –í—Ö–æ–¥–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã I2C - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
set_input_delay -clock sys_clk 0.0 [get_ports {TMP_SDA TMP_SCL}]
set_false_path -from [get_ports {TMP_SDA TMP_SCL}]

# –í—ã—Ö–æ–¥–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã I2C - open-drain —Å timing —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
set_output_delay -clock sys_clk 2.0 [get_ports {TMP_SDA TMP_SCL}]

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ I2C - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
set_max_delay -from [get_clocks sys_clk] -to [get_ports TMP_SCL] 10.0
```

### 8.2. –†–µ—Å—É—Ä—Å—ã FPGA –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### –û—Ü–µ–Ω–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | LUTs | Registers | BRAM | DSP | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------|-----------|------|-----|----------|
| **I2C Master** | ~150 | ~100 | 0 | 0 | –ê–≤—Ç–æ–º–∞—Ç + —Å—á–µ—Ç—á–∏–∫–∏ |
| **PDM Input** | ~80 | ~50 | 0 | 0 | –î–µ–º–æ–¥—É–ª—è—Ç–æ—Ä |
| **Audio Buffer** | ~50 | ~30 | 1-2 | 0 | 16K x 7bit –ø–∞–º—è—Ç—å |
| **BCD conversion** | ~200 | ~50 | 0 | 0 | –î–≤–æ–∏—á–Ω—ã–π-–¥–µ—Å—è—Ç–∏—á–Ω—ã–π |
| **7-seg display** | ~100 | ~80 | 0 | 0 | –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä |
| **Smoothing FIFO** | ~100 | ~50 | 0-1 | 0 | XPM FIFO |

**–ò—Ç–æ–≥–æ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** ~680 LUTs, ~360 Registers, 1-3 BRAM

### 8.3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π

#### –î–ª—è –Ω–∏–∑–∫–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–∏–∏
1. **Clock gating** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–ª–æ–∫–æ–≤
2. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã** –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ PDM
3. **–ü–∞—Ä–∞–º–µ—Ç—Ä SMOOTHING=0** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è
4. **–ü—Ä–æ—Å—Ç–æ–π –¥–∏—Å–ø–ª–µ–π** - –º–µ–Ω—å—à–µ —Ä–∞–∑—Ä—è–¥–æ–≤

#### –î–ª—è –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π
1. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ SMOOTHING** - –±–æ–ª—å—à–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è
2. **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞** –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
3. **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è** –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–º–µ—Ö** –≤ –ø–∏—Ç–∞–Ω–∏–∏

#### –î–ª—è –∞—É–¥–∏–æ –∫–∞—á–µ—Å—Ç–≤–∞
1. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã** –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ PDM
2. **–ë–æ–ª—å—à–∏–π –±—É—Ñ–µ—Ä** –∑–∞–ø–∏—Å–∏ (RAM_SIZE)
3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è PDM –¥–µ–º–æ–¥—É–ª—è—Ü–∏—è** - –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
4. **–°—Ç–µ—Ä–µ–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ m_lr_sel

---

## 9. –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 9.1. –†–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

#### –ú–Ω–æ–≥–æ–∫–∞–Ω–∞–ª—å–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ
```systemverilog
// –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∞—Ç—á–∏–∫–æ–≤
parameter NUM_SENSORS = 4;
logic [NUM_SENSORS-1:0][7:0] sensor_addr = {8'h4B, 8'h48, 8'h49, 8'h4A};
logic [$clog2(NUM_SENSORS)-1:0] current_sensor;

// –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å –¥–∞—Ç—á–∏–∫–æ–≤
always @(posedge clk) begin
    case (spi_state)
        IDLE: begin
            current_sensor <= current_sensor + 1'b1;  // –°–ª–µ–¥—É—é—â–∏–π –¥–∞—Ç—á–∏–∫
            i2c_data[22:16] <= sensor_addr[current_sensor]; // –ê–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–≥–æ –¥–∞—Ç—á–∏–∫–∞
        end
    endcase
end
```

#### Alarm —Å–∏—Å—Ç–µ–º–∞
```systemverilog
logic [15:0] temp_high_limit = 16'h1900;  // 25¬∞C
logic [15:0] temp_low_limit  = 16'h1400;  // 20¬∞C
logic        temp_alarm;

always @(posedge clk) begin
    if (smooth_convert) begin
        temp_alarm <= (smooth_data > temp_high_limit) | (smooth_data < temp_low_limit);
    end
end
```

### 9.2. –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º—ã

#### –°—Ç–µ—Ä–µ–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
```systemverilog
logic [6:0] amplitude_L, amplitude_R;
logic       amplitude_valid_L, amplitude_valid_R;

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤
always @(posedge clk) begin
    if (m_clk_en) begin
        m_lr_sel <= ~m_lr_sel;  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ L/R –∫–∞–∂–¥—ã–π —Ç–∞–∫—Ç

        if (m_lr_sel) begin
            amplitude_L <= amplitude;  // –õ–µ–≤—ã–π –∫–∞–Ω–∞–ª
            amplitude_valid_L <= amplitude_valid;
        end else begin
            amplitude_R <= amplitude;  // –ü—Ä–∞–≤—ã–π –∫–∞–Ω–∞–ª
            amplitude_valid_R <= amplitude_valid;
        end
    end
end
```

#### –¶–∏—Ñ—Ä–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤—É–∫–∞
```systemverilog
// –ü—Ä–æ—Å—Ç–æ–π —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä
logic [7:0] bass_gain = 8'd128;    // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –±–∞—Å–æ–≤
logic [7:0] treble_gain = 8'd128;  // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç DSP –±–ª–æ–∫–æ–≤)
logic [14:0] processed_amplitude;
always @(posedge clk) begin
    processed_amplitude <= (amplitude * bass_gain) >> 7;  // –ü—Ä–æ—Å—Ç–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
end
```

---

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –∫–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–ì–ª–∞–≤–∞ 5 –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º:

#### üéØ **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏**
1. **–ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–≤—è–∑–∏** - I2C –∫–∞–∫ –ø—Ä–∏–º–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ master-slave –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
2. **–¶–∏—Ñ—Ä–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** - PDM –º–æ–¥—É–ª—è—Ü–∏—è –∏ –¥–µ–º–æ–¥—É–ª—è—Ü–∏—è
3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã** - —Ç–æ—á–Ω–æ–µ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ timing —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
4. **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ** - –º–µ—Ç–æ–¥—ã —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º

#### ‚ö° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏**
1. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤** - –æ—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã timing –∫ –∫–æ–¥—É –∞–≤—Ç–æ–º–∞—Ç–∞
2. **Open-drain –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤** - PDM –∫–∞–∫ –º–æ—Å—Ç –º–µ–∂–¥—É –∞–Ω–∞–ª–æ–≥–æ–º –∏ —Ü–∏—Ñ—Ä–æ–π
4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BRAM –∏ FIFO
5. **–û—Ç–ª–∞–¥–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ mark_debug –¥–ª—è timing –∞–Ω–∞–ª–∏–∑–∞

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º

–ü–æ—Å–ª–µ –æ—Å–≤–æ–µ–Ω–∏—è –ì–ª–∞–≤—ã 5 –≤—ã –≥–æ—Ç–æ–≤—ã –∫:

#### üìö **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã**
- **SPI –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ timing –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ –ª—é–±—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º
- **UART —Å –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–µ–π** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **USB –∏ Ethernet** - –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
- **Custom –ø—Ä–æ—Ç–æ–∫–æ–ª—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å–≤—è–∑–∏

#### üîß **DSP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- **–¶–∏—Ñ—Ä–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** - FIR/IIR —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ
- **FFT —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** - –∞–Ω–∞–ª–∏–∑ —Å–ø–µ–∫—Ç—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã** - AEC, noise reduction, —ç–∫–≤–∞–ª–∏–∑–∞—Ü–∏—è
- **Multi-rate —Å–∏—Å—Ç–µ–º—ã** - –ø–µ—Ä–µ–¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è

#### üé® **–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- **Multi-master I2C** - —Å–ª–æ–∂–Ω—ã–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ —Å –∞—Ä–±–∏—Ç—Ä–∞–∂–µ–º
- **DMA –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** - –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö
- **Interrupt —Å–∏—Å—Ç–µ–º—ã** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- **Real-time —Å–∏—Å—Ç–µ–º—ã** - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –æ—Ç–∫–ª–∏–∫–∞

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

#### ‚ö†Ô∏è **–ü—Ä–æ—Ç–æ–∫–æ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. **Timing –∫—Ä–∏—Ç–∏—á–µ–Ω** - –Ω–∞—Ä—É—à–µ–Ω–∏–µ setup/hold –≤—Ä–µ–º–µ–Ω –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º
2. **Open-drain –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'z –¥–ª—è high impedance, '0 –¥–ª—è drive low
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ timeout –∏ error recovery
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏** - —Å–∏–º—É–ª—è—Ü–∏—è –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ timing** - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### üöÄ **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
1. **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** - –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º
2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ –ª–æ–≥–∏–∫–∏** - –æ–±–ª–µ–≥—á–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é
3. **–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω–∞** - –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∞—É–¥–∏–æ)
4. **Mark_debug –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤** - –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ timing
5. **Comprehensive testbenches** - –º–æ–¥–µ–ª–∏—Ä—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ì–ª–∞–≤–∞ 5 –∑–∞–ª–æ–∂–∏–ª–∞ –æ—Å–Ω–æ–≤—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –æ—Å–Ω–æ–≤—É —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ I2C –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ —à–∏—Ä–æ–∫–æ–º—É —Å–ø–µ–∫—Ç—Ä—É –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –∞ –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å PDM –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–≥–Ω–∞–ª–æ–≤.

–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤ –º–µ–∂–¥—É —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ - –≤—ã–±–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏, —á–∞—Å—Ç–æ—Ç—ã –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ –≤–ª–∏—è–µ—Ç –∫–∞–∫ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏—Å—Ç–µ–º—ã, —Ç–∞–∫ –∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ FPGA.

---

*–ì–ª–∞–≤–∞ 5 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –∏–∑—É—á–µ–Ω–∏—è –æ—Å–Ω–æ–≤ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ —Å–æ–∑–¥–∞–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Å –±–æ–≥–∞—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.*
# –ì–ª–∞–≤–∞ 3: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–∞–º—è—Ç–∏ - –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑

## –û–±–∑–æ—Ä –≥–ª–∞–≤—ã
–¢—Ä–µ—Ç—å—è –≥–ª–∞–≤–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π –∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ - –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º —Å –ø–∞–º—è—Ç—å—é. –ò–∑—É—á–∞—é—Ç—Å—è D-—Ç—Ä–∏–≥–≥–µ—Ä—ã, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–±—Ä–æ—Å–∞, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö vs –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π, –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –≤–∏–¥–µ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ–º –¥—Ä–µ–±–µ–∑–≥–∞ –∫–Ω–æ–ø–æ–∫.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –≥–ª–∞–≤–µ

–ì–ª–∞–≤–∞ 3 –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

```
CH3/
‚îú‚îÄ‚îÄ simple_ff/           # –ë–∞–∑–æ–≤—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä
‚îú‚îÄ‚îÄ simple_ff_async/     # –¢—Ä–∏–≥–≥–µ—Ä —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞ —Å–±—Ä–æ—Å–∞
‚îú‚îÄ‚îÄ simple_init_ff/      # –¢—Ä–∏–≥–≥–µ—Ä —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ blocking/            # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π
‚îî‚îÄ‚îÄ counting_buttons/    # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –¥–∏—Å–ø–ª–µ–µ–º
```

---

## 1. –û—Å–Ω–æ–≤—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

![–¢–∏–ø—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤](./images/chapter_3_flip_flops.png)
*–î–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ SystemVerilog*

### 1.1. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π D-—Ç—Ä–∏–≥–≥–µ—Ä (simple_ff.sv)

#### –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```systemverilog
module simple_ff (
   input wire   CK,     // –¢–∞–∫—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª
   input wire   D,      // –î–∞–Ω–Ω—ã–µ
   output logic Q       // –í—ã—Ö–æ–¥
);

  always_ff @(posedge CK) Q <= D;

endmodule
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:**
- **`always_ff`** - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±–ª–æ–∫ SystemVerilog –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏
- **`@(posedge CK)`** - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º—É —Ñ—Ä–æ–Ω—Ç—É —á–∞—Å–æ–≤
- **`<=` –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∞–º—è—Ç–∏

#### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã D-—Ç—Ä–∏–≥–≥–µ—Ä–∞
1. **–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ —á–∞—Å–æ–≤** (0‚Üí1 –ø–µ—Ä–µ—Ö–æ–¥) –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ D –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç—Ä–∏–≥–≥–µ—Ä
2. **–ú–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–∞–º–∏** –≤—ã—Ö–æ–¥ Q —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
3. **Setup time** - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–æ —Ñ—Ä–æ–Ω—Ç–∞ —á–∞—Å–æ–≤
4. **Hold time** - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã —É–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —Ñ—Ä–æ–Ω—Ç–∞ —á–∞—Å–æ–≤

### 1.2. –¢—Ä–∏–≥–≥–µ—Ä —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π (simple_init_ff.sv)

#### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ SystemVerilog
```systemverilog
module simple_ff (
   input wire   CK,
   input wire   D,
   output logic Q
);

  initial begin Q = '1; end          // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ 1
  always_ff @(posedge CK) Q <= D;

endmodule
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ initial –±–ª–æ–∫–æ–≤:**
- **–¢–æ–ª—å–∫–æ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏** - initial –±–ª–æ–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ testbench
- **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ FPGA –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ Xilinx FPGA –º–æ–≥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å FF
- **–ù–µ –∑–∞–º–µ–Ω—è–µ—Ç reset** - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —è–≤–Ω—ã–π —Å–±—Ä–æ—Å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- **–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏** - –∑–∞–¥–∞–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## 2. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–±—Ä–æ—Å–∞

![–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–±—Ä–æ—Å–∞](./images/chapter_3_reset_strategies.png)
*–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏*

### 2.1. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (simple_ff_async.sv)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å generate –±–ª–æ–∫–∞–º–∏
```systemverilog
module simple_ff_async #(
   parameter ASYNC = "TRUE"     // –ü–∞—Ä–∞–º–µ—Ç—Ä –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
) (
   input wire   CK,             // –ß–∞—Å—ã
   input wire   CE,             // –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
   input wire   SR,             // –°–∏–≥–Ω–∞–ª —Å–±—Ä–æ—Å–∞
   input wire   D,              // –î–∞–Ω–Ω—ã–µ
   output logic Q               // –í—ã—Ö–æ–¥
);

  initial Q = '1;               // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

  generate
    if (ASYNC == "TRUE") begin : g_ASYNC
      always @(posedge CK, posedge SR) begin
        if (SR) Q <= '0;
        else if (CE) Q <= D;
      end
    end else begin : g_SYNC
      always @(posedge CK) begin
        if (SR) Q <= '0;
        else if (CE) Q <= D;
      end
    end
  endgenerate
endmodule
```

### 2.2. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π vs –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–±—Ä–æ—Å

#### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–±—Ä–æ—Å
```systemverilog
always_ff @(posedge CK) begin
    if (RESET) Q <= '0;         // –°–±—Ä–æ—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —á–∞—Å–æ–≤
    else if (CE) Q <= D;        // –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏
end
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–±—Ä–æ—Å –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª
- ‚úÖ **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å timing** - —Å–±—Ä–æ—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —á–∞—Å–∞–º–∏
- ‚úÖ **–õ–µ–≥–∫–∏–π routing** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç glitch –ø—Ä–∏ —Å–±—Ä–æ—Å–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå **–ë–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - —Å–±—Ä–æ—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ LUT
- ‚ùå **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —á–∞—Å–æ–≤** - —Å–±—Ä–æ—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —á–∞—Å–æ–≤
- ‚ùå **–ó–∞–¥–µ—Ä–∂–∫–∞ —Å–±—Ä–æ—Å–∞** - —Å–±—Ä–æ—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —á–∞—Å–æ–≤

#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–±—Ä–æ—Å
```systemverilog
always_ff @(posedge CK, posedge RESET) begin
    if (RESET) Q <= '0;         // –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–±—Ä–æ—Å
    else if (CE) Q <= D;        // –ó–∞–ø–∏—Å—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–±—Ä–æ—Å–∞
end
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–±—Ä–æ—Å** - –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–∞—Å–æ–≤
- ‚úÖ **–ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π reset FF
- ‚úÖ **–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞—Ä—Ç—É–µ—Ç –∏–∑ known state
- ‚úÖ **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º** - safety systems

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå **–°–ª–æ–∂–Ω—ã–π routing** - —Ç—Ä–µ–±—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö reset —Å–µ—Ç–µ–π
- ‚ùå **Reset glitches** - –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–æ–º–µ—Ö–∞—Ö
- ‚ùå **Timing —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - reset recovery/removal –≤—Ä–µ–º–µ–Ω–∞
- ‚ùå **–ú–µ—Ç–∞—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ —Å–±—Ä–æ—Å–∞ –±–ª–∏–∑–∫–æ –∫ —Ñ—Ä–æ–Ω—Ç—É —á–∞—Å–æ–≤

### 2.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|------------|-------------|--------------|
| **–û–±—ã—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã** | ‚úÖ | - | –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ |
| **Safety critical** | - | ‚úÖ | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| **Low power** | ‚úÖ | - | –ú–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ |
| **High speed** | ‚úÖ | ‚ùå | –õ–µ–≥—á–µ timing closure |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–∏–∑–∞–π–Ω–∞** | ‚úÖ | ‚ùå | –ú–µ–Ω—å—à–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ |

---

## 3. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ vs –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è

![–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ vs –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ](./images/chapter_3_blocking_vs_nonblocking.png)
*–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π*

### 3.1. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–æ–¥—É–ª—å (blocking.sv)

#### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
```systemverilog
module blocking #(
   parameter BLOCK = "FALSE"    // –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
) (
   input wire   CK,
   input wire   D,
   output logic Q
);

  logic stage;                  // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª

  initial begin
    stage = '0;
    Q     = '0;
  end

  generate
    if (BLOCK == "TRUE") begin : g_BLOCK
      always @(posedge CK) begin
        stage = D;              // –ë–õ–û–ö–ò–†–£–Æ–©–ï–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
        Q     = stage;          // –ë–õ–û–ö–ò–†–£–Æ–©–ï–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
      end
    end else begin : g_NONBLOCK
      always @(posedge CK) begin
        stage <= D;             // –ù–ï–ë–õ–û–ö–ò–†–£–Æ–©–ï–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
        Q     <= stage;         // –ù–ï–ë–õ–û–ö–ò–†–£–Æ–©–ï–ï –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
      end
    end
  endgenerate
endmodule
```

### 3.2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–Ω–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è

#### –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è (<=) - –ü–†–ê–í–ò–õ–¨–ù–û
```systemverilog
always_ff @(posedge CK) begin
    stage <= D;     // stage –ø–æ–ª—É—á–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ D –≤ –∫–æ–Ω—Ü–µ —Ç–∞–∫—Ç–∞
    Q     <= stage; // Q –ø–æ–ª—É—á–∏—Ç –°–¢–ê–†–û–ï –∑–Ω–∞—á–µ–Ω–∏–µ stage
end
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–µ—Ç—Å—è **—Å–¥–≤–∏–≥–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä** - –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ stage –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —Ç–∞–∫—Ç–µ.

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¢–∞–∫—Ç 1: D=1 ‚Üí stage=1, Q=0 (Q –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ stage=0)
- –¢–∞–∫—Ç 2: D=0 ‚Üí stage=0, Q=1 (Q –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ stage=1)

#### –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è (=) - –ü–†–û–ë–õ–ï–ú–ê–¢–ò–ß–ù–û
```systemverilog
always_ff @(posedge CK) begin
    stage = D;      // stage –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ D –ù–ï–ú–ï–î–õ–ï–ù–ù–û
    Q     = stage;  // Q –ø–æ–ª—É—á–∞–µ—Ç –ù–û–í–û–ï –∑–Ω–∞—á–µ–Ω–∏–µ stage
end
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–µ—Ç—Å—è **–∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** - Q=D —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –Ω–∞ –æ–¥–∏–Ω —Ç–∞–∫—Ç.

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¢–∞–∫—Ç 1: D=1 ‚Üí stage=1, Q=1 (Q –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ stage=1)
- –¢–∞–∫—Ç 2: D=0 ‚Üí stage=0, Q=0 (Q –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ stage=0)

### 3.3. –ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π

#### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–î–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏:**
```systemverilog
always_ff @(posedge clk) begin
    // –¢–û–õ–¨–ö–û –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
    state <= next_state;
    counter <= counter + 1;
    data_reg <= data_in;
end
```

**–î–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏:**
```systemverilog
always_comb begin
    // –¢–û–õ–¨–ö–û –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è
    next_state = state + 1;
    address = base_addr + offset;
    valid = enable && ready;
end
```

#### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ù–ò–ö–û–ì–î–ê –Ω–µ —Å–º–µ—à–∏–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º always –±–ª–æ–∫–µ:**
```systemverilog
always_ff @(posedge clk) begin
    temp = state + 1;    // ‚ùå –ë–õ–û–ö–ò–†–£–Æ–©–ï–ï –≤ sequential –±–ª–æ–∫–µ
    state <= temp;       // ‚ùå –°–º–µ—à–∏–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–π
end
```

#### üéØ –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
1. **–ì–æ–Ω–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤** - –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏
2. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ simulation vs synthesis** - —Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –ø–æ—Å–ª–µ —Å–∏–Ω—Ç–µ–∑–∞
3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ timing** - –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ critical paths
4. **–û—à–∏–±–∫–∏ –≤ –º–Ω–æ–≥–æ—Ç–∞–∫—Ç–æ–≤—ã—Ö —Å—Ö–µ–º–∞—Ö** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö

---

## 4. –°–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

![–°–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –¥–∏—Å–ø–ª–µ–∏](./images/chapter_3_seven_segment.png)
*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Å –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º*

### 4.1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã counting_buttons

#### –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å
```systemverilog
module counting_buttons #(
   parameter MODE         = "DEC",    // "DEC" –∏–ª–∏ "HEX"
   parameter NUM_SEGMENTS = 8,        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä—è–¥–æ–≤
   parameter CLK_PER      = 10,       // –ü–µ—Ä–∏–æ–¥ —á–∞—Å–æ–≤ (ns)
   parameter REFR_RATE    = 1000,     // –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (Hz)
   parameter ASYNC_BUTTON = "SAFE"    // –†–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–∫–∏
) (
   input wire                      clk,
   input wire                      BTNC,        // –ö–Ω–æ–ø–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞
   input wire                      CPU_RESETN,  // –°–∏–≥–Ω–∞–ª —Å–±—Ä–æ—Å–∞
   output logic [NUM_SEGMENTS-1:0] anode,       // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞–º–∏
   output logic [7:0]              cathode      // –°–µ–≥–º–µ–Ω—Ç—ã –¥–∏—Å–ø–ª–µ—è
);
```

### 4.2. –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ (cathode_top.sv)

#### –¢–∞–±–ª–∏—Ü–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
```systemverilog
always_ff @(posedge clk) begin
    cathode[7] <= digit_point;  // –î–µ—Å—è—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞
    case (encoded)
      4'h0: cathode[6:0] <= 7'b1000000;  // "0"
      4'h1: cathode[6:0] <= 7'b1111001;  // "1"
      4'h2: cathode[6:0] <= 7'b0100100;  // "2"
      4'h3: cathode[6:0] <= 7'b0110000;  // "3"
      4'h4: cathode[6:0] <= 7'b0011001;  // "4"
      4'h5: cathode[6:0] <= 7'b0010010;  // "5"
      4'h6: cathode[6:0] <= 7'b0000010;  // "6"
      4'h7: cathode[6:0] <= 7'b1111000;  // "7"
      4'h8: cathode[6:0] <= 7'b0000000;  // "8"
      4'h9: cathode[6:0] <= 7'b0010000;  // "9"
      4'hA: cathode[6:0] <= 7'b0001000;  // "A"
      4'hB: cathode[6:0] <= 7'b0000011;  // "B"
      4'hC: cathode[6:0] <= 7'b1000110;  // "C"
      4'hD: cathode[6:0] <= 7'b0100001;  // "D"
      4'hE: cathode[6:0] <= 7'b0000110;  // "E"
      4'hF: cathode[6:0] <= 7'b0001110;  // "F"
    endcase
end
```

**–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏:**
- **–ë–∏—Ç—ã [6:0]** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–µ–≥–º–µ–Ω—Ç–∞–º **g-f-e-d-c-b-a**
- **'0' = —Å–µ–≥–º–µ–Ω—Ç –≤–∫–ª—é—á–µ–Ω**, '1' = —Å–µ–≥–º–µ–Ω—Ç –≤—ã–∫–ª—é—á–µ–Ω (–∏–Ω–≤–µ—Ä—Å–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- **–ë–∏—Ç [7]** - –¥–µ—Å—è—Ç–∏—á–Ω–∞—è —Ç–æ—á–∫–∞ (dp)

### 4.3. –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–ø–ª–µ—è (seven_segment.sv)

#### –†–∞—Å—á–µ—Ç —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```systemverilog
localparam INTERVAL = int'(100000000 / (CLK_PER * REFR_RATE));
// –î–ª—è CLK_PER=10ns (100MHz), REFR_RATE=1000Hz:
// INTERVAL = 100000000 / (10 * 1000) = 10000 —Ç–∞–∫—Ç–æ–≤
```

#### –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å—á–µ—Ç—á–∏–∫ —Ä–∞–∑—Ä—è–¥–æ–≤
```systemverilog
logic [$clog2(INTERVAL)-1:0]     refresh_count;  // –°—á–µ—Ç—á–∏–∫ –≤—Ä–µ–º–µ–Ω–∏
logic [$clog2(NUM_SEGMENTS)-1:0] anode_count;    // –ù–æ–º–µ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä—è–¥–∞

always @(posedge clk) begin
    if (refresh_count == INTERVAL) begin
        refresh_count <= '0;
        anode_count   <= anode_count + 1'b1;     // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞–∑—Ä—è–¥—É
    end else
        refresh_count <= refresh_count + 1'b1;   // –û—Ç—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏

    anode              <= '1;                    // –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ä–∞–∑—Ä—è–¥—ã
    anode[anode_count] <= '0;                    // –í–∫–ª—é—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑—Ä—è–¥
    cathode            <= segments[anode_count]; // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∏–º–≤–æ–ª
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. **–ü–æ –æ—á–µ—Ä–µ–¥–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑—Ä—è–¥** –Ω–∞ –≤—Ä–µ–º—è INTERVAL —Ç–∞–∫—Ç–æ–≤
2. **–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑—Ä—è–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∏–º–≤–æ–ª**
3. **–ò–∑-–∑–∞ –∏–Ω–µ—Ä—Ü–∏–∏ –∑—Ä–µ–Ω–∏—è** –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–∑—Ä—è–¥—ã —Å–≤–µ—Ç—è—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
4. **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >50Hz** –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è

### 4.4. –î–µ—Å—è—Ç–∏—á–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ (BCD)

#### –§—É–Ω–∫—Ü–∏—è –¥–µ—Å—è—Ç–∏—á–Ω–æ–≥–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞
```systemverilog
function [NUM_SEGMENTS-1:0][3:0] dec_inc;
    input [NUM_SEGMENTS-1:0][3:0] din;
    bit [3:0] next_val;
    bit       carry_in;

    carry_in = '1;                              // –ù–∞—á–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å –¥–ª—è +1
    for (int i = 0; i < NUM_SEGMENTS; i++) begin
        next_val = din[i] + carry_in;
        if (next_val > 9) begin                 // –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–∞
            dec_inc[i] = '0;                    // –°–±—Ä–æ—Å —Ä–∞–∑—Ä—è–¥–∞ –≤ 0
            carry_in   = '1;                    // –ü–µ—Ä–µ–Ω–æ—Å –≤ —Å—Ç–∞—Ä—à–∏–π —Ä–∞–∑—Ä—è–¥
        end else begin
            dec_inc[i] = next_val;              // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            carry_in   = '0;                    // –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞
        end
    end
endfunction
```

**BCD (Binary Coded Decimal) –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞:**
- **–ö–∞–∂–¥—ã–π –¥–µ—Å—è—Ç–∏—á–Ω—ã–π —Ä–∞–∑—Ä—è–¥** –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è 4 –±–∏—Ç–∞–º–∏ (0000-1001)
- **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ 9** —Ä–∞–∑—Ä—è–¥ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ 0 —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞—Ö** –∏ –¥–∏—Å–ø–ª–µ–π–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- **–£–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** - –ø—Ä—è–º–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑—Ä—è–¥-—Å–∏–º–≤–æ–ª

---

## 5. –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–µ–±–µ–∑–≥–∞ –∫–Ω–æ–ø–æ–∫

![–ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–µ–±–µ–∑–≥–∞](./images/chapter_3_button_debouncing.png)
*–†–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –¥—Ä–µ–±–µ–∑–≥–∞ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤*

### 5.1. –ü—Ä–æ–±–ª–µ–º–∞ –¥—Ä–µ–±–µ–∑–≥–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

#### –§–∏–∑–∏—á–µ—Å–∫–∞—è –ø—Ä–∏—Ä–æ–¥–∞ –¥—Ä–µ–±–µ–∑–≥–∞
–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–∏ —Ä–∞–∑–º—ã–∫–∞–Ω–∏–∏/–∑–∞–º—ã–∫–∞–Ω–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–µ—Ä–∏—é –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –∏–∑-–∑–∞:
- **–£–ø—Ä—É–≥–æ—Å—Ç–∏ –º–µ—Ç–∞–ª–ª–∞** - –∫–æ–Ω—Ç–∞–∫—Ç—ã "–ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞—é—Ç"
- **–û–∫–∏—Å–ª–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏** - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ
- **–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö –≤–∏–±—Ä–∞—Ü–∏–π** - —Ä–µ–∑–æ–Ω–∞–Ω—Å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **–≠–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞—Ç–∏–∫–∏** - –∏—Å–∫—Ä–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–º—ã–∫–∞–Ω–∏–∏

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥—Ä–µ–±–µ–∑–≥–∞:**
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 1-20 –º—Å (—Ç–∏–ø–∏—á–Ω–æ 5-10 –º—Å)
- **–ß–∞—Å—Ç–æ—Ç–∞**: 100-1000 Hz
- **–ê–º–ø–ª–∏—Ç—É–¥–∞**: –ü–æ–ª–Ω—ã–π —Ä–∞–∑–º–∞—Ö —Å–∏–≥–Ω–∞–ª–∞

### 5.2. –ú–µ—Ç–æ–¥ SAFE - –ë–∞–∑–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è
```systemverilog
(* ASYNC_REG = "TRUE" *) logic [2:0] button_sync;

always @(posedge clk) begin
    button_down <= '0;
    button_sync <= button_sync << 1 | BTNC;        // –°–¥–≤–∏–≥–æ–≤—ã–π —Ä–µ–≥–∏—Å—Ç—Ä
    if (button_sync[2:1] == 2'b01)                 // –î–µ—Ç–µ–∫—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–∞ 0‚Üí1
        button_down <= '1;
    else
        button_down <= '0;
end
```

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
1. **–¢—Ä–∏ FF —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞** - button_sync[2:0]
2. **–°–¥–≤–∏–≥ –≤–ª–µ–≤–æ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –±–∏—Ç–∞** - `<< 1 | BTNC`
3. **–î–µ—Ç–µ–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ 01** - button_sync[2:1] == 2'b01
4. **–û–¥–∏–Ω –∏–º–ø—É–ª—å—Å –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ** - button_down –∞–∫—Ç–∏–≤–µ–Ω –æ–¥–∏–Ω —Ç–∞–∫—Ç

**–ê—Ç—Ä–∏–±—É—Ç—ã —Å–∏–Ω—Ç–µ–∑–∞:**
- **`(* ASYNC_REG = "TRUE" *)`** - –ø–æ–º–µ—á–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä—ã –∫–∞–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- **–ü–æ–º–æ–≥–∞–µ—Ç –≤ timing –∞–Ω–∞–ª–∏–∑–µ** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ–Ω–∏–º–∞—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–£–ª—É—á—à–∞–µ—Ç placement** - —Ä–µ–≥–∏—Å—Ç—Ä—ã —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –±–ª–∏–∑–∫–æ

### 5.3. –ú–µ—Ç–æ–¥ DEBOUNCE - –ü–æ–ª–Ω–æ–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ —Å—á–µ—Ç—á–∏–∫–æ–º
```systemverilog
(* ASYNC_REG = "TRUE" *) logic [2:0] button_sync;
logic       counter_en;
logic [7:0] counter;

always @(posedge clk) begin
    button_down <= '0;
    button_sync <= button_sync << 1 | BTNC;

    // –ó–∞–ø—É—Å–∫ —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–∞
    if (button_sync[2:1] == 2'b01)
        counter_en <= '1;
    else if (~button_sync[1])
        counter_en <= '0;

    // –°—á–µ—Ç—á–∏–∫ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –¥—Ä–µ–±–µ–∑–≥–∞
    if (counter_en) begin
        counter <= counter + 1'b1;
        if (&counter) begin                         // –í—Å–µ –±–∏—Ç—ã = 1 (255)
            counter_en <= '0;
            counter    <= '0;
            button_down <= '1;                      // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ
        end
    end
end
```

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è:**
1. **–î–µ—Ç–µ–∫—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–∞** –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫
2. **–°—á–µ—Ç—á–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç 255 —Ç–∞–∫—Ç–æ–≤** (2.55 –º–∫—Å –ø—Ä–∏ 100MHz)
3. **–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞–∂–∞—Ç–æ–π** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è button_down
4. **–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è** - —Å—á–µ—Ç—á–∏–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è

### 5.4. –ú–µ—Ç–æ–¥ NOCLOCK - –ü—Ä–æ—Å—Ç–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```systemverilog
always @(posedge clk) begin
    last_button <= button;
    button      <= BTNC;
    if (BTNC & ~button) button_down <= '1;          // –î–µ—Ç–µ–∫—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–∞
    else button_down <= '0;
end
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–¢–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–∞** - –±–µ–∑ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –¥—Ä–µ–±–µ–∑–≥–∞
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã** - 2 FF
- **–ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è** - –∑–∞–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫** - —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –¥—Ä–µ–±–µ–∑–≥–æ–º

### 5.5. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –¥—Ä–µ–±–µ–∑–≥–∞

| –ú–µ—Ç–æ–¥ | –†–µ—Å—É—Ä—Å—ã (LUT) | –ó–∞–¥–µ—Ä–∂–∫–∞ | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|-------|---------------|----------|------------|------------|
| **NOCLOCK** | 2 | 2 —Ç–∞–∫—Ç–∞ | 60% | –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ |
| **SAFE** | 5 | 3 —Ç–∞–∫—Ç–∞ | 85% | –û–±—ã—á–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è |
| **DEBOUNCE** | 15 | 255 —Ç–∞–∫—Ç–æ–≤ | 95% | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É:**
- **NOCLOCK**: –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
- **SAFE**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π
- **DEBOUNCE**: –î–ª—è —à—É–º–Ω—ã—Ö —Å—Ä–µ–¥ –∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–π

---

## 6. Debug –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –æ—Ç–ª–∞–¥–∫–∞

### 6.1. –ê—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

#### mark_debug –∞—Ç—Ä–∏–±—É—Ç
```systemverilog
(* mark_debug = "true" *) logic button_down;
(* mark_debug = "true" *) logic [2:0] button_sync;
(* mark_debug = "true" *) logic counter_en;
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ mark_debug:**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –≤ ILA** - Integrated Logic Analyzer
- **–ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏–∫—É** - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **Vivado –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç** –∫ debug infrastructure
- **–ú–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å –≤ runtime** - ChipScope/ILA

#### ASYNC_REG –∞—Ç—Ä–∏–±—É—Ç
```systemverilog
(* ASYNC_REG = "TRUE" *) logic [2:0] button_sync;
```

**–ó–Ω–∞—á–µ–Ω–∏–µ ASYNC_REG:**
- **–ü–æ–º–µ—á–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä—ã** - —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- **–ò—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ timing –∞–Ω–∞–ª–∏–∑–∞** - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è setup/hold
- **–£–ª—É—á—à–∞–µ—Ç placement** - —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ** - –ø–æ–Ω—è—Ç–Ω–æ –∏–∑ –∫–æ–¥–∞

### 6.2. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–ª–∞–¥–∫–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

#### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ reset** - –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
2. **–ü–æ–º–µ—á–∞–π—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã** - mark_debug –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Ç–æ—á–µ–∫
3. **–†–∞–∑–¥–µ–ª—è–π—Ç–µ –ª–æ–≥–∏–∫—É** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ always –±–ª–æ–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–µ

#### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–µ

**Clock domain crossing –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
```systemverilog
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
always_ff @(posedge clk_a) signal_a <= data;
always_ff @(posedge clk_b) signal_b <= signal_a;  // –ú–µ—Ç–∞—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å!

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
always_ff @(posedge clk_a) signal_a <= data;
always_ff @(posedge clk_b) sync_reg <= {sync_reg[1:0], signal_a};
```

**–ì–æ–Ω–∫–∏ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–µ:**
```systemverilog
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
always_comb begin
    if (condition) signal <= value1;
    if (other_condition) signal <= value2;  // –í–æ–∑–º–æ–∂–Ω–∞—è –≥–æ–Ω–∫–∞
end

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
always_comb begin
    signal = default_value;
    if (condition) signal = value1;
    else if (other_condition) signal = value2;
end
```

---

## 7. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 7.1. –°—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

#### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Å–∏–≥–Ω–∞–ª–æ–≤
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ**: –î–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π/—Å–∏–≥–Ω–∞–ª–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è:
- `clk` - —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ—Ç "clock" (—Ç–∞–∫—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª)
- `resetn` - reset —Å –∏–Ω–≤–µ—Ä—Å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π (active low reset)
- `data_valid` - —Ñ–ª–∞–≥ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (data validity flag)
- `button_sync` - —Ä–µ–≥–∏—Å—Ç—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏ (button synchronization register)
- `counter_en` - —Å–∏–≥–Ω–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ (counter enable)
- `anode_count` - —Å—á–µ—Ç—á–∏–∫ –Ω–æ–º–µ—Ä–∞ –∞–Ω–æ–¥–∞ –¥–∏—Å–ø–ª–µ—è (anode number counter)
- `refresh_count` - —Å—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ—è (refresh rate counter)

#### –®–∞–±–ª–æ–Ω –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ —Å reset
```systemverilog
always_ff @(posedge clk) begin
    if (!resetn) begin
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤
        state <= IDLE;
        counter <= '0;
        data_valid <= '0;
    end else begin
        // –†–∞–±–æ—á–∞—è –ª–æ–≥–∏–∫–∞
        case (state)
            IDLE: if (start) state <= ACTIVE;
            ACTIVE: begin
                counter <= counter + 1;
                if (done) state <= IDLE;
            end
        endcase
    end
end
```

#### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏
```systemverilog
// –ö–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
always_comb begin
    next_state = state;
    next_counter = counter;

    case (state)
        IDLE: if (start) next_state = ACTIVE;
        ACTIVE: begin
            next_counter = counter + 1;
            if (done) next_state = IDLE;
        end
    endcase
end

// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
always_ff @(posedge clk) begin
    if (!resetn) begin
        state <= IDLE;
        counter <= '0;
    end else begin
        state <= next_state;
        counter <= next_counter;
    end
end
```

### 7.2. Timing –∞–Ω–∞–ª–∏–∑ –∏ constraints

#### –í–∞–∂–Ω—ã–µ timing –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- **Setup time (Tsu)**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–æ —Ñ—Ä–æ–Ω—Ç–∞
- **Hold time (Th)**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —Ñ—Ä–æ–Ω—Ç–∞
- **Clock-to-Q (Tcq)**: –í—Ä–µ–º—è –æ—Ç —Ñ—Ä–æ–Ω—Ç–∞ —á–∞—Å–æ–≤ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞
- **Propagation delay (Tpd)**: –ó–∞–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É

#### Timing constraints –¥–ª—è —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–≥–æ –¥–∏—Å–ø–ª–µ—è
```tcl
# –ß–∞—Å—Ç–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —á–∞—Å–æ–≤
create_clock -period 10.0 [get_ports clk]

# –í—ã—Ö–æ–¥—ã –¥–∏—Å–ø–ª–µ—è - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏
set_output_delay -clock clk 2.0 [get_ports {anode[*] cathode[*]}]

# –í—Ö–æ–¥—ã –∫–Ω–æ–ø–æ–∫ - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ, –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
set_input_delay -clock clk 0.0 [get_ports BTNC]
set_false_path -from [get_ports BTNC]  # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤—Ö–æ–¥
```

### 7.3. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏

#### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ reset –ø–æ–≤–µ–¥–µ–Ω–∏—è:**
```systemverilog
initial begin
    reset_test();
    normal_operation_test();
    edge_cases_test();
end

task reset_test();
    resetn = 0;
    repeat(10) @(posedge clk);
    assert(state == IDLE) else $error("Reset failed");
    assert(counter == 0) else $error("Counter not reset");
endtask
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏:**
```systemverilog
task button_test();
    BTNC = 0;
    repeat(5) @(posedge clk);

    BTNC = 1;  // –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    repeat(3) @(posedge clk);
    assert(button_down == 1) else $error("Button detection failed");

    repeat(1) @(posedge clk);
    assert(button_down == 0) else $error("Button should be single pulse");
endtask
```

---

## 8. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –∫–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

–ì–ª–∞–≤–∞ 3 –∑–∞–ª–æ–∂–∏–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –æ—Å–Ω–æ–≤—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏:

#### üéØ **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏**
1. **D-—Ç—Ä–∏–≥–≥–µ—Ä—ã** - –±–∞–∑–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–∞–º—è—Ç–∏ –≤ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
2. **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–±—Ä–æ—Å–∞** - –≤—ã–±–æ—Ä –º–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Å–±—Ä–æ—Å–æ–º
3. **–ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É `<=` –∏ `=`
4. **Timing** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ setup/hold –≤—Ä–µ–º–µ–Ω –∏ clock domains
5. **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –¥–∏—Å–ø–ª–µ–∏ –∏ –∫–Ω–æ–ø–∫–∏

#### ‚ö° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏**
1. **always_ff vs always_comb** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤
2. **Generate –±–ª–æ–∫–∏** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏
3. **Debug –∞—Ç—Ä–∏–±—É—Ç—ã** - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ª–∞–¥–∫–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –∂–µ–ª–µ–∑–µ
4. **–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
5. **–ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –¥—Ä–µ–±–µ–∑–≥–∞** - –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–∞–º

–ü–æ—Å–ª–µ –æ—Å–≤–æ–µ–Ω–∏—è –ì–ª–∞–≤—ã 3 –≤—ã –≥–æ—Ç–æ–≤—ã –∫:

#### üìö **–ì–ª–∞–≤–∞ 4: –ö–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã**
- **–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π** - —É–∂–µ –µ—Å—Ç—å –æ–ø—ã—Ç —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- **–ö–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤** - –Ω–∞–≤—ã–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ clock domain –∏ reset —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

#### üîß **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã**
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** - SPI, I2C, UART
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –¥–∏—Å–ø–ª–µ–∏, —ç–Ω–∫–æ–¥–µ—Ä—ã
- **–°–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏** - —Ç–æ—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ timing

#### üé® **–î–∏–∑–∞–π–Ω –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è**
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ –º–æ–¥—É–ª—è–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

#### ‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ:**
1. **`<=` –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏**, `=` –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π
2. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ reset** –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—Ö–æ–¥—ã** (–∫–Ω–æ–ø–∫–∏, –≤–Ω–µ—à–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã)
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Å–∏–º—É–ª—è—Ü–∏–∏** –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ FPGA
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ timing —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

#### üöÄ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**
–¢–µ–ø–µ—Ä—å, —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏, —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –≤—ã –≥–æ—Ç–æ–≤—ã –∫ –∏–∑—É—á–µ–Ω–∏—é –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤ –ì–ª–∞–≤–µ 4, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—Ç –≤—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –≤ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–∏—Å—Ç–µ–º.

---

*–ì–ª–∞–≤–∞ 3 –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏–∑—É—á–µ–Ω–∏–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ (–ì–ª–∞–≤–∞ 1), –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–ì–ª–∞–≤–∞ 2) –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–∞–º—è—Ç–∏ (–ì–ª–∞–≤–∞ 3) —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª—é–±—ã—Ö —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –≤ FPGA.*